@model CongErrors
@{
    string[] methods = ["Index", "Edit"];
    string ceModalUrl = string.Format("/CongErrors/{0}?id={1}", methods[1], Model.Id);

    var boolProps = ViewData.ModelMetadata.Properties
        .Where(p => p.ModelType == typeof(bool))
        .ToList();
}
<div class="container px-3">
    <div class="text-end mb-3">
        <button type="button"
                data-open-modal
                data-modal-id="GlobalModal"
                class="btn btn-sm btn-secondary me-1"
                data-url="@ceModalUrl"
                data-title="Editar errores congénitos">
            Editar
        </button>
    </div>

    <div class="row g-3">
        <div class="col-md-6">
            @foreach (var prop in boolProps.Take((boolProps.Count + 1) / 2))
            {
                bool value = (bool)Model.GetType().GetProperty(prop.PropertyName)!.GetValue(Model)!;
                var resultProp = Model.GetType().GetProperty("Result" + prop.PropertyName.Replace("Cong", "").Replace("OHP", "OHP"));

                string? resultValue = resultProp?.GetValue(Model)?.ToString();

                <div class="border-bottom py-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-semibold">@prop.DisplayName</span>
                        <span>
                            @(value
                                                    ? Html.Raw("<i class='bi bi-check-circle-fill text-success fs-5'></i>")
                                                    : Html.Raw("<i class='bi bi-x-circle-fill text-danger fs-5'></i>")
                                                    )
                        </span>
                    </div>

                    @if (!string.IsNullOrWhiteSpace(resultValue))
                    {
                        <div class="text-muted small mt-1 ps-1">
                            Resultado: @resultValue
                        </div>
                    }
                </div>
            }
        </div>

        <div class="col-md-6">
            @foreach (var prop in boolProps.Skip((boolProps.Count + 1) / 2))
            {
                bool value = (bool)Model.GetType().GetProperty(prop.PropertyName)!.GetValue(Model)!;
                var resultProp = Model.GetType().GetProperty("Result" + prop.PropertyName.Replace("Cong", "").Replace("OHP", "OHP"));

                string? resultValue = resultProp?.GetValue(Model)?.ToString();

                <div class="border-bottom py-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="fw-semibold">@prop.DisplayName</span>
                        <span>
                            @(value
                                                    ? Html.Raw("<i class='bi bi-check-circle-fill text-success fs-5'></i>")
                                                    : Html.Raw("<i class='bi bi-x-circle-fill text-danger fs-5'></i>")
                                                    )
                        </span>
                    </div>

                    @if (!string.IsNullOrWhiteSpace(resultValue))
                    {
                        <div class="text-muted small mt-1 ps-1">
                            Resultado: @resultValue
                        </div>
                    }
                </div>
            }
        </div>
    </div>

    <div class="mt-4">
        <label class="fw-semibold">@Html.DisplayNameFor(m => m.Other)</label>
        <div class="border p-2 bg-light rounded" style="min-height:40px">
            @Model.Other
        </div>
    </div>
</div>
